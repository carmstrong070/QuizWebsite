@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="text-center">
    <h1 class="display-4">@Model.LoadedQuiz.Title</h1>
    <h2>@Model.LoadedQuiz.Author</h2>
</div>

<form method="POST" >

    @for (int questionIndex = 0; questionIndex < Model.LoadedQuiz.Questions.Count; questionIndex++)
    {
        var question = Model.LoadedQuiz.Questions[questionIndex];
        @Html.HiddenFor(m => m.LoadedQuiz.Questions[questionIndex].QuestionId)
        @Html.HiddenFor(m => m.LoadedQuiz.Questions[questionIndex].QuestionTypeName)

        <div>@question.QuestionText</div>

        @if (question is SelectQuestion)
        {
            var selectQuestion = question as SelectQuestion;

            @for (int optionIndex = 0; optionIndex < selectQuestion.AnswerOptions.Count; optionIndex++)
            {
                var answerOption = selectQuestion.AnswerOptions[optionIndex];
                @Html.Hidden($"LoadedQuiz.Questions[{questionIndex}].AnswerOptions[{optionIndex}].Id")

                if (question.QuestionTypeName == "single_select")
                {
                    <div class="form-check">
                        @Html.RadioButton($"LoadedQuiz.Questions[{questionIndex}].QuestionResponse", answerOption.Id, new { @class = "form-check-input", @value = answerOption.Id })
                        <label class="form-check-label">@answerOption.OptionText</label>
                    </div>
                }
                else if (question.QuestionTypeName == "multi_select")
                {
                    <div class="form-check">
                        @Html.CheckBox($"LoadedQuiz.Questions[{questionIndex}].AnswerOptions[{optionIndex}].ResponseValue", new { @class = "form-check-input", @value = true })
                        <label class="form-check-label">
                            @answerOption.OptionText
                        </label>
                    </div>
                }
            }
        }
        else if (question is TextQuestion)
        {
            var textQuestion = question as TextQuestion;

            <div class="mb-3">
                <label class="form-label">Answer</label>
                @Html.TextBoxFor(m => m.LoadedQuiz.Questions[questionIndex].QuestionResponse, new { @class = "form-control", @placeholder = "Answer" })
            </div>
        }
    }

    <button type="submit" class="btn btn-primary">Submit</button>

</form>